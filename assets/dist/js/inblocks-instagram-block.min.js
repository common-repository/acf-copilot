(()=>{"use strict";var r={pluginUrl:inblocks.plugin_url,pluginDomain:inblocks.plugin_domain,ajaxUrl:inblocks.ajax_url,ajaxNonce:inblocks.ajax_nonce,siteUrl:inblocks.site_url,adminUrl:inblocks.admin_url,blockPreviewImg:inblocks.block_preview_img},e=wp.i18n.__,t=e("Embed, customize, and insert images from any Instagram URL.","instagram-blocks"),e=[e("inblocks","instagram-blocks"),e("instablocks","instagram-blocks"),e("insta","instagram-blocks"),e("gram","instagram-blocks"),e("instagram","instagram-blocks")];function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function i(e){var t=e.attributes,l=e.setAttributes,c=e.setIframeStyles;return React.createElement(React.Fragment,null,React.createElement(o,null,React.createElement(u,null,React.createElement(b,{icon:"editor-kitchensink",label:a("Preview Embed","instagram-blocks"),onClick:function(e){e.preventDefault(),t.iframePlaceholderSrc&&(l({iframeSrc:t.iframePlaceholderSrc+"embed/"}),setShowInsertUrlInput(!1),setInsertUrlValue(""))}}),React.createElement(b,{icon:"editor-insertmore",label:a("Edit Embed","instagram-blocks"),onClick:function(e){e.preventDefault(),l({iframeSrc:""})}}),React.createElement(b,{icon:"editor-removeformatting",label:a("Reset Embed Formatting","instagram-blocks"),onClick:function(e){e.preventDefault();var t={iframeAlign:"none",iframeWidth:320,iframeHeight:540,iframeBorderStyle:"none",iframeBorderWidth:0,iframeBorderRadius:0,iframeBorderColor:"#FFFFFF"};l(t);for(var r={},a=0,n=Object.entries({iframeWidth:"width",iframeHeight:"height",iframeBorderStyle:"border-style",iframeBorderWidth:"border-width",iframeBorderRadius:"border-radius",iframeBorderColor:"border-color"});a<n.length;a++){var o=function(e){if(Array.isArray(e))return e}(o=n[a])||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,n,o,i=[],l=!0,c=!1;try{for(n=(t=t.call(e)).next;!(l=(r=n.call(t)).done)&&(i.push(r.value),2!==i.length);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}}(o)||function(e){var t;if(e)return"string"==typeof e?s(e,2):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,2):void 0}(o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=o[0],o=o[1],i=t[i],i="number"==typeof i?"".concat(i,"px"):i;r[o]=i}c(r)}}),React.createElement(m,{label:a("Align Content Text","instagram-blocks"),value:t.contentTextAlign,onChange:function(e){return l({contentTextAlign:e})}}))))}function l(e){var t=e.attributes,e=e.iframeStyles;return React.createElement("div",{class:"inblocks-instagram-media"},React.createElement("iframe",{className:"align".concat(t.iframeAlign),src:t.iframeSrc,style:e,frameborder:"0",allowtransparency:"true"}))}var a=wp.i18n.__,n=wp.blockEditor,o=n.BlockControls,m=n.AlignmentToolbar,n=wp.components,u=n.ToolbarGroup,b=n.ToolbarButton;function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(t,e){var r,a=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)),a}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach(function(e){p(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function p(e,t,r){var a=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=c(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(t);return(t="symbol"==c(a)?a:String(a))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){function t(t,r,a){o(p({},t,a)),i(function(e){return d(d({},e),{},p({},t,a))});var n="number"==typeof a?"".concat(a,"px"):a;i(function(e){return d(d({},e),{},p({},r,n))})}var r=e.attributes,o=e.setAttributes,i=e.setIframeStyles;return React.createElement(React.Fragment,null,React.createElement(h,null,React.createElement(k,{title:y("Embed","instagram-blocks"),initialOpen:!0},React.createElement(w,{label:y("Width","instagram-blocks"),help:y("Set embed custom width.","instagram-blocks"),value:r.iframeWidth,onChange:function(e){return t("iframeWidth","width",parseInt(e))},allowReset:!0,resetFallbackValue:320,min:320,max:2e3,step:20}),React.createElement(w,{label:y("Height","instagram-blocks"),help:y("Set embed custom height.","instagram-blocks"),value:r.iframeHeight,onChange:function(e){return t("iframeHeight","height",parseInt(e))},allowReset:!0,resetFallbackValue:540,min:320,max:2e3,step:20}),React.createElement(S,{label:y("Border Style","instagram-blocks"),help:y("Set embed custom border style.","instagram-blocks"),value:r.iframeBorderStyle,onChange:function(e){return t("iframeBorderStyle","border-style",e)},options:[{label:y("None","instagram-blocks"),value:"none"},{label:y("Dotted","instagram-blocks"),value:"dotted"},{label:y("Dashed","instagram-blocks"),value:"dashed"},{label:y("Solid","instagram-blocks"),value:"solid"},{label:y("Double","instagram-blocks"),value:"double"},{label:y("Groove","instagram-blocks"),value:"groove"},{label:y("Ridge","instagram-blocks"),value:"ridge"},{label:y("Inset","instagram-blocks"),value:"inset"},{label:y("Outser","instagram-blocks"),value:"outset"}]}),React.createElement(w,{label:y("Border Width","instagram-blocks"),help:y("Set embed custom border width.","instagram-blocks"),value:r.iframeBorderWidth,onChange:function(e){return t("iframeBorderWidth","border-width",parseInt(e))},allowReset:!0,resetFallbackValue:0,min:0,max:100,step:2}),React.createElement(w,{label:y("Border Radius","instagram-blocks"),help:y("Set embed custom border radius.","instagram-blocks"),value:r.iframeBorderRadius,onChange:function(e){return t("iframeBorderRadius","border-radius",parseInt(e))},allowReset:!0,resetFallbackValue:0,min:0,max:100,step:4}),React.createElement(v,{title:y("Set embed custom border color.","instagram-blocks"),colorSettings:[{label:y("Border Color","instagram-blocks"),value:r.iframeBorderColor,onChange:function(e){return t("iframeBorderColor","border-color",e)}}]}))))}var y=wp.i18n.__,n=wp.blockEditor,h=n.InspectorControls,v=n.PanelColorSettings,n=wp.components,k=n.PanelBody,w=n.RangeControl,S=n.SelectControl;function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=o.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?E(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function B(e){function r(e){1<arguments.length&&void 0!==arguments[1]&&arguments[1]?C("core/notices").createErrorNotice(A(e,"instagram-blocks"),{type:"snackbar",isDismissible:!0}):C("core/notices").createErrorNotice(A(e,"instagram-blocks"))}var a=e.setAttributes,t=(e=R(I(!1),2))[0],n=e[1],o=(e=R(I(""),2))[0],i=e[1];return React.createElement(React.Fragment,null,React.createElement(O,{className:"components-button is-tertiary",onClick:function(e){e.preventDefault(),e.stopPropagation(),n(!0)}},A("Insert from URL","instagram-blocks")),t&&React.createElement("div",{className:"inblocks-insert-wrap",onClick:function(e){e.preventDefault(),e.target.className.includes("inblocks-insert-wrap")&&n(!1)}},React.createElement("input",{type:"url",className:"inblocks-insert-url-input",placeholder:A("Add any public Instagram media URL and press Enter.","instagram-blocks"),value:o,onChange:function(e){return i(e.target.value)},onKeyDown:function(e){if("Enter"===e.key){e.preventDefault();try{var t=new URL(o);if("www.instagram.com"!==t.hostname&&"instagram.com"!==t.hostname)return void r("Invalid Instagram URL.",!0)}catch(e){return void r("URL insert process failed.",!0)}a({iframeSrc:o+"embed/",iframePlaceholderSrc:o}),n(!1),i("")}}})))}var A=wp.i18n.__,C=wp.data.dispatch,I=wp.element.useState,O=wp.components.Button;function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function x(e){var t,r,a=e.INBLOCKS,n=e.attributes,o=e.setAttributes,e=e.blockType;return n.preview?React.createElement(React.Fragment,null,React.createElement("img",{src:a.blockPreviewImg,alt:"Block preview"})):(t=(r=function(e){if(Array.isArray(e))return e}(r=_({width:"".concat(n.iframeWidth,"px"),height:"".concat(n.iframeHeight,"px"),borderStyle:n.iframeBorderStyle,borderWidth:"".concat(n.iframeBorderWidth,"px"),borderRadius:"".concat(n.iframeBorderRadius,"px"),borderColor:n.iframeBorderColor}))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,n,o,i=[],l=!0,c=!1;try{for(n=(t=t.call(e)).next;!(l=(r=n.call(t)).done)&&(i.push(r.value),2!==i.length);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}}(r)||function(e){var t;if(e)return"string"==typeof e?j(e,2):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j(e,2):void 0}(r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],r=r[1],React.createElement("div",W(),n.iframeSrc?React.createElement(React.Fragment,null,React.createElement(l,{INBLOCKS:a,attributes:n,iframeStyles:t})):React.createElement(T,{icon:"format-".concat(e),label:F(e.charAt(0).toUpperCase()+e.slice(1),"instagram-blocks"),instructions:F("Customize and modify the block iframe of your Instagram image embed.","instagram-blocks")},React.createElement(B,{setAttributes:o})),React.createElement(i,{attributes:n,setAttributes:o,setIframeStyles:r}),React.createElement(g,{attributes:n,setAttributes:o,setIframeStyles:r})))}function P(e){return e=e.attributes,React.createElement("div",U.save(),React.createElement("div",{class:"inblocks-instagram-media"},React.createElement("iframe",{src:e.iframeSrc,className:"align".concat(e.iframeAlign),style:{width:"".concat(e.iframeWidth,"px"),height:"".concat(e.iframeHeight,"px"),borderStyle:e.iframeBorderStyle,borderWidth:"".concat(e.iframeBorderWidth,"px"),borderRadius:"".concat(e.iframeBorderRadius,"px"),borderColor:e.iframeBorderColor},title:D("Image","instagram-blocks"),frameBorder:"0",allowTransparency:"true"})))}var F=wp.i18n.__,_=wp.element.useState,n=(wp.data.dispatch,wp.blockEditor),W=n.useBlockProps,T=(n.RichText,wp.components.Placeholder),D=wp.i18n.__,n=wp.blockEditor,U=n.useBlockProps,n=(n.RichText,wp.i18n.__);(0,wp.blocks.registerBlockType)("inblocks/image",{apiVersion:2,title:n("Image","instagram-blocks"),icon:"format-image",example:{attributes:{preview:!0}},category:"instablocks",keywords:e,description:t,supports:{align:["wide","full","left","right","center"],anchor:!0,className:!0,customClassName:!0,html:!0,inserter:!0,multiple:!0,reusable:!0,spacing:{margin:!0,padding:!0},color:{background:!0,text:!0,gradients:!0,link:!0},typography:{fontSize:!0,lineHeight:!0,fontStyle:!0,fontWeight:!0,textTransform:!0,letterSpacing:!0,textAlign:!0}},attributes:{iframeSrc:{type:"string",default:""},iframePlaceholderSrc:{type:"string",default:""},iframeAlign:{type:"string",default:"none"},iframeWidth:{type:"number",default:320},iframeHeight:{type:"number",default:540},iframeBorderStyle:{type:"string",default:"none"},iframeBorderWidth:{type:"number",default:0},iframeBorderRadius:{type:"number",default:0},iframeBorderColor:{type:"string",default:"#FFFFFF"},preview:{type:"boolean",default:!1}},edit:function(e){var t=e.attributes,e=e.setAttributes;return React.createElement(x,{INBLOCKS:r,attributes:t,setAttributes:e,blockType:"image"})},save:function(e){e=e.attributes;return React.createElement(P,{attributes:e})}})})();